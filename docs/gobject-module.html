<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright (C) 2018 Michael L. Gran -->
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>gobject module (Guile GI)</title>

<meta name="description" content="gobject module (Guile GI)">
<meta name="keywords" content="gobject module (Guile GI)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Reference-Guide.html#Reference-Guide" rel="up" title="Reference Guide">
<link href="Further-Resources-and-Contact-Info.html#Further-Resources-and-Contact-Info" rel="next" title="Further Resources and Contact Info">
<link href="gi-module.html#gi-module" rel="prev" title="gi module">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="document-1.0.1.css">


</head>

<body lang="en">
<a name="gobject-module"></a>
<div class="header">
<p>
Previous: <a href="gi-module.html#gi-module" accesskey="p" rel="prev">gi module</a>, Up: <a href="Reference-Guide.html#Reference-Guide" accesskey="u" rel="up">Reference Guide</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="The-_0028gobject_0029-module"></a>
<h3 class="section">3.2 The <samp>(gobject)</samp> module</h3>

<p>The <code>(gobject)</code> module lets you interact with the C type system
used by the Glib and GObject libraries.  In Glib and GObject, they
define a kind of class structure in C.  Those classes have three
notable features.
</p>
<ul>
<li> Each GObject class has an integer identifier called a <code>GType</code>.

</li><li> Each GObject class has zero or more <em>properties</em>, which are class
slot variables.  Unlike in GOOPS, the slot variables have a specified
type: integer, string, etc.

</li><li> And a GObject class may also have <em>signals</em>.  Signals are a
GObject system for registering callbacks for specific events.
</li></ul>

<p>The <code>(gobject)</code> module contains functionality to define GOOPS
classes that can interact with the GObject type system. When using
this module, a new class is defined with the
<code>make-gobject-type</code> procedure.
</p>
<dl>
<dt><a name="index-Object"></a>Variable: <strong>Object</strong></dt>
<dd><p>This <code>Object</code> variable holds the GObject base class type. You can
derive new GObjects from this type.  It may be used as the superclass
in <code>make-gobject-type</code>.
</p></dd></dl>

<dl>
<dt><a name="index-make_002dgobject_002dtype"></a>Procedure: <strong>make-gobject-type</strong> <em>name superclass ...</em></dt>
<dd><p>Makes a new Guile foreign object type for use with GObject. <var>name</var>
is a symbol naming the type. The <code>superclass</code> is a GObject type
that this class inherits from.  Every class must descend from another
class.  (See Object).
</p>
<p>After the name and the superclass, you may add property specifiers and
signal specifiers.  Each property specifier adds a variable to the
class.  Each signal specifier adds a signal that the class may emit.
</p>
<p>Unlike in GOOPS classes, in GObject classes, the property variables
variables need to have a predefined type.  These properties are in
addition to any properties defined by the superclass.
</p>
<p>For each property you need to provide the following information as a
list.  The details of defining a properties specifier is detailed
below, but as an example:
</p>
<div class="lisp">
<pre class="lisp">('property &quot;height&quot; G_TYPE_DOUBLE &quot;Height&quot; &quot;How tall&quot;
    0.0 300.0 175.0 G_PARAM_READWRITE)
('property &quot;weight&quot; G_TYPE_DOUBLE &quot;Weight&quot; &quot;How fat&quot;
    0.0 300.0 75.0 G_PARAM_READWRITE))
</pre></div>

<p>The numerical values in the example above are the minimum, maximum,
and default values.
</p>
<p>For each signal that the instances of the class may emit, you need to
add a signal specifier.  The details of signal specifiers are below,
but, as an example
</p><div class="lisp">
<pre class="lisp">('signal &quot;mouse-click&quot; G_SIGNAL_RUN_FIRST
  G_TYPE_INT                           ; return type
  (list G_TYPE_DOUBLE G_TYPE_BOOLEAN)) ; parameter types
</pre></div>

<p>The procedure returns the new type.
</p></dd></dl>

<p>An instance (or object) of a GObject type can be created with the
<code>make</code> procedure which is part of GOOPS. <code>make</code> takes one
parameter, which is the class of the instance to create.  For
instance, the following form
</p>
<div class="lisp">
<pre class="lisp">(define c (make &lt;my-gobject-type&gt;))
</pre></div>

<p>To get and set the properties of an instance of a gobject type, use
the <code>property-set!</code> and <code>property-get</code> procedures.
</p>
<p>To connect a class method to be used as a callback when a signal is
emitted, use the <code>callback</code> procedure.
</p>
<p>To find a list of all the signals for a given class, use
<code>signal-list-names</code>.
</p>
<p>To emit a signal, use the <code>emit</code> method.
</p>
<hr>
<div class="header">
<p>
Previous: <a href="gi-module.html#gi-module" accesskey="p" rel="prev">gi module</a>, Up: <a href="Reference-Guide.html#Reference-Guide" accesskey="u" rel="up">Reference Guide</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
